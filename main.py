"ZnJvbSBnYW1lLmFjdGlvbnMgaW1wb3J0IHBlcmZvcm1fYWN0aW9uCmZyb20gZ2FtZS5wbGF5ZXIgaW1wb3J0IGNyZWF0ZV9wbGF5ZXIsIGdldF9wbGF5ZXJfc3RhdHVzCmZyb20gZ2FtZS53b3JsZCBpbXBvcnQgZ2V0X2N1cnJlbnRfbG9jYXRpb24sIGluaXRpYWxpemVfd29ybGQKZnJvbSB1dGlscy5zYXZlX2xvYWQgaW1wb3J0IGxpc3Rfc2F2ZV9maWxlcywgbG9hZF9nYW1lLCBzYXZlX2dhbWUKZnJvbSB1dGlscy50ZXh0X2Zvcm1hdHRpbmcgaW1wb3J0IHByaW50X2hlbHAsIHByaW50X3dlbGNvbWVfbWVzc2FnZQoKCmRlZiBtYWluKCk6CiAgICBwcmludF93ZWxjb21lX21lc3NhZ2UoKQoKICAgICMgQWRkIGxvYWQgZ2FtZSBvcHRpb24KICAgIGxvYWRfb3B0aW9uID0gaW5wdXQoIkRvIHlvdSB3YW50IHRvIGxvYWQgYSBzYXZlZCBnYW1lPyAoeS9uKTogIikubG93ZXIoKQogICAgaWYgbG9hZF9vcHRpb24gPT0gJ3knOgogICAgICAgIHNhdmVfZmlsZXMgPSBsaXN0X3NhdmVfZmlsZXMoKQogICAgICAgIGlmIHNhdmVfZmlsZXM6CiAgICAgICAgICAgIHByaW50KCJBdmFpbGFibGUgc2F2ZSBmaWxlczoiKQogICAgICAgICAgICBmb3IgaSwgZmlsZSBpbiBlbnVtZXJhdGUoc2F2ZV9maWxlcywgMSk6CiAgICAgICAgICAgICAgICBwcmludChmIntpfS4ge2ZpbGV9IikKICAgICAgICAgICAgY2hvaWNlID0gaW50KGlucHV0KCJFbnRlciB0aGUgbnVtYmVyIG9mIHRoZSBzYXZlIGZpbGUgdG8gbG9hZDogIikpCiAgICAgICAgICAgIHBsYXllciwgd29ybGQgPSBsb2FkX2dhbWUoc2F2ZV9maWxlc1tjaG9pY2UgLSAxXSkKICAgICAgICAgICAgaWYgcGxheWVyIGlzIE5vbmUgb3Igd29ybGQgaXMgTm9uZToKICAgICAgICAgICAgICAgIHByaW50KCJGYWlsZWQgdG8gbG9hZCBnYW1lLiBTdGFydGluZyBhIG5ldyBnYW1lLiIpCiAgICAgICAgICAgICAgICBwbGF5ZXIgPSBjcmVhdGVfcGxheWVyKCJLZXZpbiIpCiAgICAgICAgICAgICAgICB3b3JsZCA9IGluaXRpYWxpemVfd29ybGQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJObyBzYXZlIGZpbGVzIGZvdW5kLiBTdGFydGluZyBhIG5ldyBnYW1lLiIpCiAgICAgICAgICAgIHBsYXllciA9IGNyZWF0ZV9wbGF5ZXIoIktldmluIikKICAgICAgICAgICAgd29ybGQgPSBpbml0aWFsaXplX3dvcmxkKCkKICAgIGVsc2U6CiAgICAgICAgcGxheWVyID0gY3JlYXRlX3BsYXllcigiS2V2aW4iKQogICAgICAgIHdvcmxkID0gaW5pdGlhbGl6ZV93b3JsZCgpCgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBjdXJyZW50X2xvY2F0aW9uID0gZ2V0X2N1cnJlbnRfbG9jYXRpb24od29ybGQpCiAgICAgICAgcHJpbnQoZiJcbllvdSBhcmUgaW4gdGhlIHtjdXJyZW50X2xvY2F0aW9ufS4iKQogICAgICAgIHByaW50KGdldF9wbGF5ZXJfc3RhdHVzKHBsYXllcikpCgogICAgICAgIGFjdGlvbiA9IGlucHV0KCJXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGRvPyAiKS5sb3dlcigpCgogICAgICAgIGlmIGFjdGlvbiA9PSAicXVpdCI6CiAgICAgICAgICAgIHNhdmVfZ2FtZShwbGF5ZXIsIHdvcmxkKQogICAgICAgICAgICBwcmludCgi8J+SviBUaGFua3MgZm9yIHBsYXlpbmchIFlvdXIgcHJvZ3Jlc3MgaGFzIGJlZW4gc2F2ZWQuIPCfkYsiKQogICAgICAgICAgICBicmVhawogICAgICAgIGVsaWYgYWN0aW9uID09ICJoZWxwIjoKICAgICAgICAgICAgcHJpbnRfaGVscCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcGVyZm9ybV9hY3Rpb24ocGxheWVyLCB3b3JsZCwgYWN0aW9uKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQo="