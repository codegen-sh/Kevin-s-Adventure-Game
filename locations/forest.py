"ZnJvbSBnYW1lLm15dGhpY2FsIGltcG9ydCBzdW1tb25fbXl0aGljYWxfY3JlYXR1cmUKZnJvbSBnYW1lLnBsYXllciBpbXBvcnQgYWRkX2l0ZW1fdG9faW52ZW50b3J5LCBoZWFsX3BsYXllcgpmcm9tIGdhbWUuc3RhdGUgaW1wb3J0IHVwZGF0ZV93b3JsZF9zdGF0ZQpmcm9tIHV0aWxzLnJhbmRvbV9ldmVudHMgaW1wb3J0IGdlbmVyYXRlX3JhbmRvbV9ldmVudAoKCmRlZiBlbnRlcl9mb3Jlc3Qod29ybGQsIHBsYXllcik6CiAgICBwcmludCgi8J+MsiBZb3UgZW50ZXIgdGhlIGx1c2gsIGdyZWVuIGZvcmVzdC4gVGhlIGFpciBpcyBmaWxsZWQgd2l0aCB0aGUgc291bmRzIG9mIPCfkKYgYmlyZHMgYW5kIHJ1c3RsaW5nIGxlYXZlcy4g8J+NgyIpCgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBwcmludCgiXG7wn4yzIFdoYXQgd291bGQgeW91IGxpa2UgdG8gZG8gaW4gdGhlIGZvcmVzdD8iKQogICAgICAgIHByaW50KCIxLiDwn5SNIEV4cGxvcmUgZGVlcGVyIikKICAgICAgICBwcmludCgiMi4g8J+nlyBDbGltYiBhIHRyZWUiKQogICAgICAgIHByaW50KCIzLiDwn5GCIExpc3RlbiB0byB0aGUgZm9yZXN0IikKICAgICAgICBwcmludCgiNC4g8J+NhCBGb3JhZ2UgZm9yIGZvb2QiKQogICAgICAgIHByaW50KCI1LiDwn5qqIExlYXZlIHRoZSBmb3Jlc3QiKQoKICAgICAgICBjaG9pY2UgPSBpbnB1dCgiRW50ZXIgeW91ciBjaG9pY2UgKDEtNSk6ICIpCgogICAgICAgIGlmIGNob2ljZSA9PSAiMSI6CiAgICAgICAgICAgIGV4cGxvcmVfZm9yZXN0KHdvcmxkLCBwbGF5ZXIpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjIiOgogICAgICAgICAgICBjbGltYl90cmVlKHdvcmxkLCBwbGF5ZXIpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjMiOgogICAgICAgICAgICBsaXN0ZW5fdG9fZm9yZXN0KHdvcmxkLCBwbGF5ZXIpCiAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjQiOgogICAgICAgICAgICBmb3JhZ2VfZm9yX2Zvb2Qod29ybGQsIHBsYXllcikKICAgICAgICBlbGlmIGNob2ljZSA9PSAiNSI6CiAgICAgICAgICAgIHByaW50KCJZb3UgZGVjaWRlIHRvIGxlYXZlIHRoZSBmb3Jlc3QuIikKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiSW52YWxpZCBjaG9pY2UuIFBsZWFzZSB0cnkgYWdhaW4uIikKCmRlZiBleHBsb3JlX2ZvcmVzdCh3b3JsZCwgcGxheWVyKToKICAgIHByaW50KCLwn5q24oCN4pmC77iPIFlvdSBkZWNpZGUgdG8gZXhwbG9yZSBkZWVwZXIgaW50byB0aGUgZm9yZXN0LiIpCiAgICBldmVudCA9IGdlbmVyYXRlX3JhbmRvbV9ldmVudChldmVudHMgPSBbKCJmaW5kX2JlcnJpZXMiLCA0MCksICgiZW5jb3VudGVyX2FuaW1hbCIsIDI1KSwgKCJkaXNjb3Zlcl9jbGVhcmluZyIsIDEwKSwgKE5vbmUsIDI1KV0pCgogICAgaWYgZXZlbnQgPT0gImZpbmRfYmVycmllcyI6CiAgICAgICAgcHJpbnQoIvCfq5AgWW91IHN0dW1ibGUgdXBvbiBhIGJ1c2ggZnVsbCBvZiByaXBlIGJlcnJpZXMhIPCfjL8iKQogICAgICAgIGFkZF9pdGVtX3RvX2ludmVudG9yeShwbGF5ZXIsICJiZXJyaWVzIikKICAgIGVsaWYgZXZlbnQgPT0gImVuY291bnRlcl9hbmltYWwiOgogICAgICAgIHByaW50KCLwn6aMIFlvdSBlbmNvdW50ZXIgYSBmcmllbmRseSBkZWVyLiBJdCBhbGxvd3MgeW91IHRvIGFwcHJvYWNoIGFuZCBwZXQgaXQuIikKICAgICAgICBoZWFsX3BsYXllcihwbGF5ZXIsIDUpCiAgICAgICAgcHJpbnQoIvCfkpogVGhlIHBlYWNlZnVsIGludGVyYWN0aW9uIGxlYXZlcyB5b3UgZmVlbGluZyByZWZyZXNoZWQuIikKICAgIGVsaWYgZXZlbnQgPT0gImRpc2NvdmVyX2NsZWFyaW5nIjoKICAgICAgICBwcmludCgi4pyoIFlvdSBkaXNjb3ZlciBhIGJlYXV0aWZ1bCBjbGVhcmluZyB3aXRoIGEgc21hbGwgcG9uZC4g8J+Pnu+4jyIpCiAgICAgICAgIyBzdW1tb25fbXl0aGljYWxfY3JlYXR1cmUod29ybGQsIHBsYXllciwgInVuaWNvcm4iKQogICAgICAgICMgdXBkYXRlX3dvcmxkX3N0YXRlKHdvcmxkLCAiYWRkX2NsZWFyaW5nIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIvCfpLfigI3imYLvuI8gWW91ciBleHBsb3JhdGlvbiB5aWVsZHMgbm90aGluZyBvZiBub3RlIHRoaXMgdGltZS4iKQoKZGVmIGNsaW1iX3RyZWUod29ybGQsIHBsYXllcik6CiAgICBwcmludCgi8J+nl+KAjeKZgu+4jyBZb3UgY2xpbWIgYSB0YWxsIHRyZWUgdG8gZ2V0IGEgYmV0dGVyIHZpZXcgb2YgdGhlIHN1cnJvdW5kaW5nIGFyZWEuIikKICAgIHByaW50KCLwn5GB77iPIEZyb20gdXAgaGVyZSwgeW91IGNhbiBzZWUgdGhlIOKbsO+4jyBtb3VudGFpbiBwZWFrcyBpbiB0aGUgZGlzdGFuY2UgYW5kIHdoYXQgbG9va3MgbGlrZSB0aGUgZW50cmFuY2UgdG8gYSDwn5Wz77iPIGNhdmUuIikKCmRlZiBsaXN0ZW5fdG9fZm9yZXN0KHdvcmxkLCBwbGF5ZXIpOgogICAgcHJpbnQoIvCfkYIgWW91IHN0b3AgYW5kIGxpc3RlbiBjYXJlZnVsbHkgdG8gdGhlIHNvdW5kcyBvZiB0aGUgZm9yZXN0LiIpCiAgICBwcmludCgi8J+MiiBZb3UgaGVhciBhIGZhaW50IHNvdW5kIG9mIHJ1c2hpbmcgd2F0ZXIgaW4gdGhlIGRpc3RhbmNlLiBUaGVyZSBtaWdodCBiZSBhIHJpdmVyIG5lYXJieS4iKQogICAgIyBUT0RPOiBJbXBsZW1lbnQgdGhpcwogICAgIyBpZiBnZW5lcmF0ZV9yYW5kb21fZXZlbnQoZXZlbnRzID0gWygiZGlzY292ZXJfcml2ZXIiLCAyMCksIChOb25lLCA4MCldKSA9PSAiZGlzY292ZXJfcml2ZXIiOgogICAgIyAgICAgcHJpbnQoIllvdSd2ZSBkaXNjb3ZlcmVkIGEgcml2ZXIhIikKICAgICMgICAgIHVwZGF0ZV93b3JsZF9zdGF0ZSh3b3JsZCwgImFkZF9yaXZlciIpCiAgICAjIGVsc2U6CiAgICAjICAgICBwcmludCgiWW91IGRvbid0IGZpbmQgYW55dGhpbmcgb2Ygbm90ZSB0aGlzIHRpbWUuIikKCmRlZiBmb3JhZ2VfZm9yX2Zvb2Qod29ybGQsIHBsYXllcik6CiAgICBwcmludCgi8J+UjSBZb3Ugc2VhcmNoIHRoZSBmb3Jlc3QgZmxvb3IgZm9yIGVkaWJsZSBwbGFudHMgYW5kIG11c2hyb29tcy4iKQogICAgaWYgZ2VuZXJhdGVfcmFuZG9tX2V2ZW50KGV2ZW50cyA9IFsoImZpbmRfbXVzaHJvb21zIiwgMzApLCAoTm9uZSwgNzApXSkgPT0gImZpbmRfbXVzaHJvb21zIjoKICAgICAgICBwcmludCgi8J+NhCBZb3UgZmluZCBzb21lIGVkaWJsZSBtdXNocm9vbXMhIPCfjokiKQogICAgICAgIGFkZF9pdGVtX3RvX2ludmVudG9yeShwbGF5ZXIsICJtdXNocm9vbXMiKQogICAgZWxzZToKICAgICAgICBwcmludCgi8J+YlCBZb3UgZG9uJ3QgZmluZCBhbnl0aGluZyBlZGlibGUgdGhpcyB0aW1lLiIpCg=="